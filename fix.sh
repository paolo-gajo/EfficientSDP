#!/bin/bash
#SBATCH -J bert-fix
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=8
#SBATCH --gres=gpu:1
#SBATCH --time=06:00:00
#SBATCH --output=./.slurm/%A_%a_output.log
#SBATCH --error=./.slurm/%A_%a_error.log
#SBATCH --mem=64G
nvidia-smi

python3 ./tools/train.py --opts --device "cuda" --freeze_encoder "0" --freeze_tagger "False" --freeze_parser "False" --early_stopping "True" --patience "0.3" --epochs "100" --shuffle "{'train': 1, 'val': 0, 'test': 0}" --save_dir "./results_ft_large/freeze_encoder_0/arc_predattn/tagger_rnn_0/parser_rnn_1_lstm_l0_h400/data=ade/parser_type_simple_0_mlp_500/arc_norm_0/use_lora_0/tag_embedding_type_linear/microsoft-deberta-v3-large_2025-05-08--00:31:07_seed_0" --model_name "microsoft/deberta-v3-large" --batch_size "8" --encoder_output_dim "1024" --sparse_embedding_tags "False" --n_tags "None" --n_edge_labels "None" --freeze_until_epoch "999" --test_ignore_tag "['O', 'no_label']" --test_ignore_edge_dep "['root', '-']" --tag_representation_dim "100" --seed "0" --self_attention_heads "2" --use_multihead_attention "False" --fraction_dataset "1" --betas "[0.9, 0.9]" --use_pred_tags "True" --keep_edge_labels "True" --softmax_scaling_coeff "1000" --gumbel_softmax "False" --keep_tags "True" --model_path "./results_ft_large/freeze_encoder_0/arc_predattn/tagger_rnn_0/parser_rnn_1_lstm_l0_h400/data=ade/parser_type_simple_0_mlp_500/arc_norm_0/use_lora_0/tag_embedding_type_linear/microsoft-deberta-v3-large_2025-05-08--00:31:07_seed_0/model.pth" --use_mst_decoding_for_validation "1" --train_file_graphs "./data/ade/train.json" --val_file_graphs "./data/ade/val.json" --test_file_graphs "./data/ade/test.json" --dataset_name "ade" --word_majority_eval "0" --save_model "1" --data_len "{'train': 0, 'val': 0, 'test': 0}" --dataset_max_steps "{'train': 0, 'val': 0, 'test': 0}" --gat_conv_heads "8" --plot "0" --only_use_biggest_graph "{'train': 0, 'val': 0, 'test': 0}" --biggest_graph_threshold "0" --augment_train "0" --augment_val "0" --augment_test "0" --augment_k_train "0" --augment_k_val "0" --augment_k_test "0" --keep_og_train "1" --keep_og_val "1" --keep_og_test "1" --augment_type "permute" --adjacency_direction "directed" --results_suffix "_ft_large" --padding "1" --procedural "0" --use_tagger_rnn "0" --tagger_rnn_type "lstm" --use_parser_rnn "1" --parser_rnn_type "lstm" --parser_rnn_hidden_size "400" --parser_rnn_layers "0" --tag_embedding_type "linear" --parser_type "simple" --parser_init "xu" --bma_init "xu" --arc_norm "0" --gnn_enc_layers "0" --parser_residual "0" --bias_type "simple" --activation "" --top_k "1" --num_attn_heads "1" --step_bilinear_attn "0" --arc_pred "attn" --use_parser_gnn "0" --mhabma "0" --arc_representation_dim "500" --tag_representation_dim "100" --use_lora "0" --tagger_lambda "0.1" --parser_lambda "1" --rep_mode "words" --laplacian_pe "" --use_abs_step_embeddings "0" --learning_rate_encoder "0.0001" --learning_rate_freeze "0.001" --learning_rate_large "5e-05" --use_step_mask "0" --use_bert_positional_embeddings "1" --unfreeze_layers "[]" --use_encoder_attn "0" --output_edge_scores "1" --use_warmup "1" --warmup_ratio "0.06" --decay_ratio "0.01" --training "steps" --training_steps "10000" --eval_steps "100" --test_steps "100" --learning_rate "5e-05" --figures_dir "./paper/figures_keep_111_k_0-0-0"
